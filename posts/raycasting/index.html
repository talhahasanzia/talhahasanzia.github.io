<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="description" content="Raycasting basics"><meta name="keywords" content="raycasting, unity3d"><meta name="author" content="talhahasanzia"><meta property="article:author" content="talhahasanzia"><meta property="fb:app_id" content="137003210502238"><title>Unconventional Raycasting</title><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@talhahasanzia"><meta property="og:type" content="article"><link rel="canonical" href="https://talhahasanzia.github.io/posts/raycasting/"><meta property="og:url" content="https://talhahasanzia.github.io/posts/raycasting/"><meta property="og:title" content="Unconventional Raycasting"><meta name="twitter:title" content="Unconventional Raycasting"><meta property="og:description" content="Raycasting basics"><meta name="twitter:description" content="Raycasting basics"><meta property="og:image" content="https://talhahasanzia.github.io/images/favicon.ico"><meta property="og:image:secure_url" content="https://talhahasanzia.github.io/images/favicon.ico"><meta name="twitter:image" content="https://talhahasanzia.github.io/images/favicon.ico"><meta property="article:tag" content="raycasting"><meta property="article:tag" content="unity3d"><link rel="shortcut icon" href="../../favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="../../images/favicon.ico"><meta name="msapplication-square70x70logo" content="../../images/favicon.ico"><meta name="msapplication-square150x150logo" content="../../images/favicon.ico"><meta name="msapplication-square310x310logo" content="../../images/faicon.ico"><meta name="msapplication-wide310x150logo" content="../../images/favicon.ico"><meta name="msapplication-TileColor" content="#ffffff"><link rel="alternate" type="application/rss+xml" title="Talha's Blog" href="https://talhahasanzia.github.io/feed/rss.xml"><link rel="stylesheet" href="../../bundle-post.min.css?1"></head><body><header><div class="scroll-progress-container"><div class="scroll-progress-bar" id="scroll-progress-bar"></div></div><a href="../../" class="btn-go-home">T a l h a ' s Blog</a><div class="hamburger hamburger--spring-r"><div class="hamburger-box"><div class="hamburger-inner"></div></div></div><div id="nav-main" class="nav-main" style="display: none;"><ul><li><a href="../../" class="home-page-link">Home</a></li><li><a href="../../about/" class="about-page-link">About</a></li><li class="social-icon-links-in-menu"><a href="https://github.com/talhahasanzia" title="GitHub"><img class="github-icon-link" alt="GitHub" src="../../images/github-square-white.svg"></a><a href="https://twitter.com/talhahasanzia" title="Twitter"><img class="twitter-icon-link" alt="Twitter" src="../../images/twitter-square-white.svg"></a><a href="https://www.linkedin.com/in/talhahasanzia/" title="LinkedIn"><img class="linkedin-icon-link" alt="LinkedIn" src="../../images/linkedin-white.svg"></a><a href="https://www.facebook.com/talhahasanzia" title="Facebook"><img class="facebook-icon-link" alt="Facebook" src="../../images/facebook-square-white.svg"></a></li></ul></div></header><article class="full-post"><header class="post-header"><img class="post-thumbnail hidden" src=""><h1 id="post-title" class="post-title">Unconventional Raycasting</h1><div class="post-date-wrapper invisible"><span class="post-date-icon-wrapper">&nbsp;</span> <time id="post-date" class="post-date" datetime="09/15/2015">09/15/2015</time> <span class="post-ago">&nbsp;</span></div><img class="post-cover hidden" src=""></header><section id="post-body" class="post-body"><p><img src="../../../images/raycast-title.png?raw=true" alt="Alt text" title="raycast"></p><h1 id="unconventional-raycasting">Unconventional Raycasting</h1><p>If you have not worked on any FPS or any other shooter game until now, it is easy to predict that you would not have needed the raycasting other than conventional way. The commonly used raycasting techniques include the directions up or down, right or left, or forward or backwards.</p><p>It can be quite difficult when the angle at which ray to be casted is, say, 45 degrees up, like for flak cannons or SAMs. In this case we can not use simple transform.up with say some +45 or -45 angles. This is possible by specifying the axis. What if the angle we need is something 56 degrees on x-axis and 120 degrees y-axis? And what if you have to design something when there is change in direction after every frame or a callback implementation. This following tryout demonstrates how easily you can manage to set the angle of the ray where to be casted just by few simple tweaks in your traditional raycasting code.</p><p><a href="https://github.com/talhahasanzia/RaycastTest">The whole project which is in this tutorial can be downloaded from GitHub from here.</a></p><p>Now first, we need an origin from which ray will be generated, at this moment we are assuming that our origin stays at a fixed position, but we can alter it the way we want. In my case, I have created a scene where a plane is aiming using raycast to determine the aim direction. The origin is the nose tip of the plane from where ray is generated. The plane is in a large box to make the raycasting work. One thing to remember here is that Physics.Raycast returns true only when raycast hits a collider, so we can not do this in open sky. Due to the enclosing box, no matter in which direction the ray is casted, it will be detected. The scene looks like this:</p><p><img src="../../../images/ray1.png?raw=true" alt="Alt text" title="raycast"></p><p>It is not very fancy but it will do the trick. Now we need to have a look at our script. Open file named ‘BasicControl.cs’ in the assets folder of the project and you will see following code:</p><pre><code>public class BasicControl : MonoBehaviour {
 
public float x = 10, y = 0, z = 0; // angles
 
public GameObject AirCraft;
public GameObject rayCastOrigin;
 
RaycastHit RayHit;
 
void Update ()
 {
 
   if (Physics.Raycast(rayCastOrigin.transform.position, Quaternion.Euler(x, y, z) * transform.forward, out RayHit, Mathf.Infinity))
   {
 
   Debug.DrawLine(rayCastOrigin.transform.position, RayHit.point, Color.red);
 
   }
 
 }
}
</code></pre><p>By setting the access modifier of float x,y,z to public we can change there values from the editor even at runtime. Here x, y and z represents the angles at x , y and z axes respectively. The RaycastHit object tells us the details about the game object on which ray is hit, that is why we have to make sure ray hits something,</p><pre><code>if (Physics.Raycast(rayCastOrigin.transform.position, Quaternion.Euler(x, y, z) * transform.forward, out RayHit, Mathf.Infinity))
</code></pre><p>Then, if ray collides with an object, RaycastHit collects data of that object which can be used in various ways. Here we are using the position of the object which is being hit by RayHit.point property , it returns x,y,z co ordinates of that object. Rays are not rendered either in scene or game window, so we draw a line from our origin point rayCastOrigin.transform.position to that object.</p><pre><code>Debug.DrawLine(rayCastOrigin.transform.position, RayHit.point, Color.red);
</code></pre><p>By doing this we will see a line drawn in the path of the ray, which will be visible in scene window. Run the project, click on the Aircraft , you will see the Script component where it shows Basic Control script and its public variables X , Y and Z.</p><p><img src="../../../images/ray2.png?raw=true" alt="Alt text" title="raycast"></p><p>Change the values of these and see how it affects the angle of ray. Now we can adjust the direction of the ray at any angle required. The script can be edited to change the angle at every frame to give it a radar effect. Or set the ray angle in desired direction and save x, y, z angles for other uses.</p><p><img src="../../../images/ray3.png?raw=true" alt="Alt text" title="raycast"></p><p><a href="https://github.com/talhahasanzia/RaycastTest">Download project.</a></p><p>Photo Credit: <a href="https://www.flickr.com/photos/imajilon/5318340181/">Laura Harris (Flickr)</a></p></section></article><section id="tags-section" class="tags-section"><div id="share-btns-container" class="share-btns-container"><a id="btn-share-twitter" href="https://twitter.com/share?url=https://talhahasanzia.github.io/posts/raycasting/&amp;text=%0AUnconventional%20Raycasting%0A&amp;hashtags=raycasting%2Cunity3d" target="_blank" title="Share on Twitter"><img src="../../images/share-twitter.svg" alt="Twitter"> </a><a id="btn-share-facebook" href="https://www.facebook.com/sharer.php?u=https://talhahasanzia.github.io/posts/raycasting/" target="_blank" title="Share on Facebook"><img src="../../images/share-facebook.svg" alt="Facebook"> </a><a id="btn-share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://talhahasanzia.github.io/posts/raycasting/" target="_blank" title="Share on LinkedIn"><img src="../../images/share-linkedin.svg" alt="LinkedIn"> </a><a id="btn-share-copy-link" href="" target="_blank" title="Copy link to clipboard"><img src="../../images/share-link.svg" alt="Copy Link"> </a><span id="copy-link-tooltip" class="copy-link-tooltip" style="display: none;">copied</span></div><div id="tags-container" class="tags-container on-full-post"><a href="../../tags/?tags=raycasting"><span class="grey-text">#</span>raycasting</a> <a href="../../tags/?tags=unity3d"><span class="grey-text">#</span>unity3d</a></div><div class="clear-floats">&nbsp;</div></section><section id="page-nav" class="page-nav invisible"><a id="btn-older-post" class="btn with-icon left disabled" href="#"><span class="arrow-icon">&nbsp;</span> Older</a> <a id="btn-newer-post" class="btn with-icon right disabled" href="#">Newer <span class="arrow-icon">&nbsp;</span></a></section><section id="fb-comments-section" class="fb-comments-section"><div class="fb-comments" data-href="https://talhahasanzia.github.io/posts/raycasting/" data-numposts="10"></div><div id="fb-root"></div><script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0&appId=137003210502238&autoLogAppEvents=1';
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));</script></section><section id="related-and-newer-posts" class="related-and-newer-posts"><input type="hidden" name="tags" id="tags-input" value="raycasting,unity3d"> <input type="hidden" name="post-id" id="post-id-input" value="raycasting"><section id="other-post-summary-template-section" class="other-post-summary-template-section"><article class="post-summary"><a href="" class="post-link"><img class="post-thumbnail" src=""></a><a href="" class="post-link"><h1 class="post-title"></h1></a><div class="post-date-wrapper invisible"><span class="post-date-icon-wrapper">&nbsp;</span> <time class="post-date" datetime=""></time> <span class="post-ago"></span></div><a href="" class="post-link"><img class="post-cover" src=""></a><p class="post-description"></p><a class="post-read-more" href="#">▸ read more</a><div class="post-tags tags-container"></div><div class="clear-floats">&nbsp;</div></article></section><section id="related-posts" class="related-posts" style="display: none;"><header><span class="grey-text">▼</span> Related</header></section><section id="newest-posts" class="newest-posts" style="display: none;"><header><span class="grey-text">▼</span> Latest</header></section></section><div class="clear-floats">&nbsp;</div><footer><a rel="alternate" type="application/rss+xml" href="https://talhahasanzia.github.io/feed/rss.xml" class="subscribe-via-rss" title="Subscribe via RSS"><img src="../../images/rss.svg" alt="Subscribe via RSS"></a><div class="social-icon-links"><a href="https://github.com/talhahasanzia" title="GitHub"><img class="github-icon-link" alt="GitHub" src="../../images/github-square.svg"></a><a href="https://twitter.com/talhahasanzia" title="Twitter"><img class="twitter-icon-link" alt="Twitter" src="../../images/twitter-square.svg"></a><a href="https://www.linkedin.com/in/talhahasanzia/" title="LinkedIn"><img class="linkedin-icon-link" alt="LinkedIn" src="../../images/linkedin.svg"></a><a href="https://www.facebook.com/talhahasanzia" title="Facebook"><img class="facebook-icon-link" alt="Facebook" src="../../images/facebook-square.svg"></a></div><div class="clear-floats">&nbsp;</div></footer><script type="text/javascript" src="../../bundle-post.min.js?1"></script></body></html>